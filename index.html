<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Check if a website is safe to visit with our URL Safety Checker">
    <title>URL Safety Checker - Secure Web Browsing</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <span>üîí</span>
                <span>SafeCheck</span>
            </div>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="#about">About</a>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero">
            <h1>URL Safety Checker</h1>
            <p>Protect yourself online. Check if a website is safe before you visit.</p>
            
            <form id="urlForm" class="search-container">
                <div class="input-wrapper">
                    <span class="search-icon">üîç</span>
                    <input type="url" id="url" required
                        class="url-input"
                        placeholder="Enter a website URL (e.g., https://example.com)">
                    <button type="submit" class="submit-button">
                        Check Safety
                    </button>
                </div>
                <p class="input-hint">Make sure to include https:// or http://</p>
            </form>

            <div id="progress" class="progress-container hidden">
                <div id="accessibility" class="progress-step">
                    <div class="spinner hidden"></div>
                    <p>Checking URL accessibility...</p>
                    <span class="checkmark hidden">‚úì</span>
                </div>
                <div id="malware" class="progress-step">
                    <div class="spinner hidden"></div>
                    <p>Scanning for malware...</p>
                    <span class="checkmark hidden">‚úì</span>
                </div>
                <div id="phishing" class="progress-step">
                    <div class="spinner hidden"></div>
                    <p>Detecting phishing threats...</p>
                    <span class="checkmark hidden">‚úì</span>
                </div>
                <div id="unwanted" class="progress-step">
                    <div class="spinner hidden"></div>
                    <p>Checking for unwanted software...</p>
                    <span class="checkmark hidden">‚úì</span>
                </div>
            </div>

            <div id="result" class="result-container hidden">
                <p id="resultText" class="result-title"></p>
                <div id="resultDetails" class="result-details"></div>
            </div>
        </section>

        <section id="features" class="features">
            <div class="features-container">
                <h2>How We Protect You</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <span class="feature-icon">üîç</span>
                        <h3 class="feature-title">URL Verification</h3>
                        <p class="feature-description">We check if the website exists and is accessible</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üõ°Ô∏è</span>
                        <h3 class="feature-title">Malware Detection</h3>
                        <p class="feature-description">Advanced scanning for malicious software</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">‚ö†Ô∏è</span>
                        <h3 class="feature-title">Phishing Protection</h3>
                        <p class="feature-description">Identify social engineering threats</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üîí</span>
                        <h3 class="feature-title">Software Analysis</h3>
                        <p class="feature-description">Detect potentially harmful applications</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="about">
            <div class="about-container">
                <h2>Why Choose Our URL Checker?</h2>
                <p class="about-description">We use advanced security APIs and real-time checking to ensure your online safety.</p>
                <div class="about-card">
                    <h3 class="feature-title">Powered by Google Safe Browsing</h3>
                    <p class="feature-description">Our service utilizes Google's Safe Browsing API to provide accurate and up-to-date security information about websites.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <p class="footer-text">¬© <script>document.write(new Date().getFullYear())</script> URL Safety Checker. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Debounce function for performance
        const debounce = (func, wait) => {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        const updateProgressStep = (stepId, status) => {
            const step = document.getElementById(stepId);
            const spinner = step.querySelector('.spinner');
            const checkmark = step.querySelector('.checkmark');
            
            if (status === 'start') {
                spinner.classList.remove('hidden');
                checkmark.classList.add('hidden');
            } else if (status === 'complete') {
                spinner.classList.add('hidden');
                checkmark.classList.remove('hidden');
            }
        };

        // Cache DOM elements
        const urlForm = document.getElementById('urlForm');
        const urlInput = document.getElementById('url');
        const resultDiv = document.getElementById('result');
        const resultText = document.getElementById('resultText');
        const resultDetails = document.getElementById('resultDetails');
        const progressDiv = document.getElementById('progress');

        // URL validation with better error messages
        const validateUrl = (url) => {
            try {
                const urlObj = new URL(url);
                if (!['http:', 'https:'].includes(urlObj.protocol)) {
                    throw new Error('URL must use HTTP or HTTPS protocol');
                }
                return urlObj;
            } catch (error) {
                if (error.message.includes('Invalid URL')) {
                    throw new Error('Please enter a valid website URL');
                }
                throw error;
            }
        };

        // Basic security check without API
        const performBasicSecurityCheck = async (url) => {
            // List of known malicious keywords
            const suspiciousKeywords = ['phishing', 'malware', 'virus', 'hack', 'scam'];
            const urlLower = url.toLowerCase();
            
            // Check for suspicious keywords in URL
            const hasSuspiciousKeywords = suspiciousKeywords.some(keyword => urlLower.includes(keyword));
            
            // Simulate API delay
            await sleep(1000);
            
            return {
                isSafe: !hasSuspiciousKeywords,
                threats: hasSuspiciousKeywords ? ['SUSPICIOUS_KEYWORDS'] : []
            };
        };

        // Handle form submission with improved error handling
        urlForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const url = urlInput.value.trim();
            
            // Reset UI state
            progressDiv.classList.remove('hidden');
            resultDiv.classList.add('hidden');
            document.querySelectorAll('.progress-step').forEach(step => {
                step.querySelector('.spinner').classList.add('hidden');
                step.querySelector('.checkmark').classList.add('hidden');
            });

            try {
                const urlObj = validateUrl(url);

                // Step 1: Check URL accessibility
                updateProgressStep('accessibility', 'start');
                try {
                    const response = await fetch(url, { mode: 'no-cors' });
                    await sleep(800);
                    updateProgressStep('accessibility', 'complete');
                } catch (error) {
                    throw new Error('URL_NOT_ACCESSIBLE');
                }

                // Basic security checks
                updateProgressStep('malware', 'start');
                await sleep(600);
                updateProgressStep('malware', 'complete');

                updateProgressStep('phishing', 'start');
                await sleep(600);
                updateProgressStep('phishing', 'complete');

                updateProgressStep('unwanted', 'start');
                const securityCheck = await performBasicSecurityCheck(url);
                await sleep(600);
                updateProgressStep('unwanted', 'complete');

                // Hide progress and show results
                await sleep(400);
                progressDiv.classList.add('hidden');
                resultDiv.classList.remove('hidden');

                if (!securityCheck.isSafe) {
                    resultDiv.className = 'result-container result-unsafe';
                    resultText.textContent = '‚ö†Ô∏è Warning: This URL has been identified as potentially unsafe!';
                    
                    resultDetails.innerHTML = `
                        <div class="threat-list">
                            <p class="threat-header">Potential Risks Detected:</p>
                            <div class="threat-item">
                                ‚Ä¢ Suspicious keywords or patterns detected
                            </div>
                            <div class="url-details">
                                <p>URL Details:</p>
                                <ul>
                                    <li>Domain: ${urlObj.hostname}</li>
                                    <li>Protocol: ${urlObj.protocol.replace(':', '')}</li>
                                    <li>Status: Potential risks detected</li>
                                </ul>
                            </div>
                            <p class="warning-message">We recommend caution when visiting this website.</p>
                        </div>
                    `;
                } else {
                    resultDiv.className = 'result-container result-safe';
                    resultText.textContent = '‚úÖ This URL appears to be safe';
                    
                    resultDetails.innerHTML = `
                        <div class="safety-checks">
                            <p>Basic Security Checks Passed!</p>
                            <ul>
                                <li>‚úì No suspicious patterns detected</li>
                                <li>‚úì Website is accessible</li>
                                <li>‚úì Basic security check passed</li>
                            </ul>
                            <div class="url-details">
                                <p>URL Details:</p>
                                <ul>
                                    <li>Domain: ${urlObj.hostname}</li>
                                    <li>Protocol: ${urlObj.protocol.replace(':', '')}</li>
                                    <li>Status: Basic checks passed</li>
                                </ul>
                            </div>
                            <p class="caution-note">
                                While basic checks passed, always exercise caution when visiting new websites.
                            </p>
                        </div>
                    `;
                }
            } catch (error) {
                progressDiv.classList.add('hidden');
                resultDiv.classList.remove('hidden');
                resultDiv.className = 'result-container result-warning';
                
                switch(error.message) {
                    case 'URL must use HTTP or HTTPS protocol':
                        resultText.textContent = 'Invalid Protocol';
                        resultDetails.innerHTML = `
                            <p>Please use either HTTP or HTTPS protocol.</p>
                            <p>Example: https://example.com</p>
                        `;
                        break;
                    case 'Please enter a valid website URL':
                        resultText.textContent = 'Invalid URL Format';
                        resultDetails.innerHTML = `
                            <p>The URL format is invalid. Please ensure:</p>
                            <ul>
                                <li>Include the protocol (https:// or http://)</li>
                                <li>Use a valid domain name</li>
                                <li>Example: https://example.com</li>
                            </ul>
                        `;
                        break;
                    case 'URL_NOT_ACCESSIBLE':
                        resultText.textContent = 'Website Not Accessible';
                        resultDetails.innerHTML = `
                            <p>The website could not be reached. This could be because:</p>
                            <ul>
                                <li>The website is down</li>
                                <li>The URL is incorrect</li>
                                <li>The server is not responding</li>
                            </ul>
                        `;
                        break;
                    default:
                        resultText.textContent = 'Error Checking URL';
                        resultDetails.innerHTML = `
                            <p>An error occurred while checking the URL. Please try again.</p>
                        `;
                }
            }
        });

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>